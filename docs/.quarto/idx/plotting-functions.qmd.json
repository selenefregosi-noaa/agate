{"title":"Plots","markdown":{"yaml":{"title":"Plots","subtitle":"Overview of all plotting functions"},"headingText":"Initialization","containsRefs":false,"markdown":"\n\n```{r, include = FALSE}\nknitr::opts_chunk$set(\n  collapse = TRUE,\n  comment = \"#>\"\n)\nlibrary(fontawesome)\n```\n\nThis page provides example calls and outputs for each of the plotting functions contained within __*agate*__. There are plotting functions that may be useful during mission planning, active piloting, and in post-processing and analysis, and the plots are grouped by those categories below.\n\nBasic details for each plotting function are available within the standard MATLAB-type documentation in the header of each function and include a detailed description, info on input and output arguments, and examples. These details can be pulled up by typing `doc <function>` or `help <function>` within the MATLAB Command Window.\n\n\nTo run any of the __*agate*__ plotting functions, the toolbox must be initialized with a configuration file. \n\nNo configuration file yet? Go back to [Get started - Create configuration files](get-started.html#create-configuration-files). At a minimum, the configuration file must include the top *required* portion, as well as the *optional - plotting* section.\n\n```matlab\n% ensure agate is on the path\n\n% initialize with specified configuration file, 'agate_config.cnf'\nCONFIG = agate(agate_config.cnf);\n\n% initialize with prompt to select configuration file\nCONFIG = agate;\n```\n\nMost of the plotting functions rely on a `pp` (piloting parameters) variable that is a large table with various outputs from the .nc and .log files compiled in one place. If this has already be created, it can be loaded directly. If not, use `extractPilotingParams` to build it. \n\n```matlab\n% load existing pp table\nload(fullfile(CONFIG.path.mission, 'flightStatus', ['diveTracking_' CONFIG.glider '.mat']))\n\n% create new pp table\npp = extractPilotingParams(CONFIG, fullfile(CONFIG.path.mission, 'basestationFiles'), fullfile(CONFIG.path.mission, 'flightStatus'), 0);\n% zero as last argument creates it from scratch (does not load any previous tables)\nsave(fullfile(CONFIG.path.mission, 'flightStatus', ['diveTracking_' CONFIG.glider '.mat']), 'pp');\n\n```\n\n<sub>[Back to top](#)</sub>\n\n## Piloting plots\n\nSome of the below piloting plots are also available within the Seaglider Piloting Tools, but __*agate*__ allows for more automated plotting (without the GUI) and tries to improve on some of those existing plots, either with better labels, more detail, or addition of acoustic inputs. \n\n### Humidity and pressure\n\n```matlab\nplotHumidityPressure(CONFIG, pp)\n```\n\n![Example humidity and pressure plot.](images/examplePlots/sg639_humidityPressure.png){#humid-press fig-align='center' width=50%}\n\n### Minimum voltage\n\nRev B gliders (*e.g.*, SG639 - left side) will have two lines - one each for the '24V' and '10V' batteries (even if both are 15V), while Rev E gliders (*e.g.*, SG679 - right side) will also have two lines, but the `10V` line will primarily remain at 15V and only the `24V` line will decrease over the mission. \n\n```matlab\nplotMinVolt(CONFIG, pp)\n```\n\n::: {#min-volt layout-ncol=2}\n![Minimum voltage plot for SG639 (Rev B glider).](images/examplePlots/sg639_minimumVoltage.png){#min-volt-639}\n\n![Minimum voltage plot for SG679 (Rev E glider).](images/examplePlots/sg679_minimumVoltage.png){#min-volt-679}\n:::\n\n### Battery remaining and PAM free space\n\nIf the glider is using a PMAR acoustic system, the free space remaining on each SD card will plot with the remaining battery capacity. \n\nThe 30% battery line and 35 GB PMAR line are hard coded into the plot, but could be modified within the function. The 'target mission duration' line is defined by `CONFIG.tmd`, as set in the configuration file. \n\n```matlab\nplotBattUseFreeSpace(CONFIG, pp)\n```\n\n![Remaining battery and PAM storage space for SG639 with PMARXL installed and operating.Note glider battery was not full at start of mission so remaining battery starts at just over 60%.](images/examplePlots/sg639_battUseFreeSpace.png){#batt-free-639 fig-align='center' width=50%}\n\n### Voltage use by device\nIf the glider is using a PMAR or WISPR acoustic system, power draw of the acoustic system will be included with measures of pitch, roll, and VBD (variable buoyancy device). \n\n```matlab\nplotVoltagePackUse(CONFIG, pp)\n```\n\n::: {#use layout-ncol=2}\n![Energy use by device, reported for each dive for SG639 (Rev B glider).](images/examplePlots/sg639_usageByDevice.png){#use-639}\n\n![Energy use by device, reported for each dive for SG679 (Rev E glider).](images/examplePlots/sg679_usageByDevice.png){#use-679}\n:::\n\n### Voltage use by device, normalized by dive duration\n\nIf the glider is using a PMAR or WISPR acoustic system, power draw of the acoustic system will be included with measures of pitch, roll, and VBD (variable buoyancy device).\n\n```matlab\nplotVoltagePackUse_norm(CONFIG, pp)\n```\n\n::: {#use-norm layout-ncol=2}\n\n![Energy use by device, normalized by dive duration for SG639 (Rev B glider).](images/examplePlots/sg639_usageByDevice_normalized.png){#use-norm-639}\n\n![Energy use by device, normalized by dive duration for SG679 (Rev E glider).](images/examplePlots/sg679_usageByDevice_normalized.png){#use-norm-679}\n\n:::\n\n### Map\n\nThe map will include the waypoints and track from the `targets` file and will plot the surface positions of each dive (yellow dots), with red lines connecting surface positions, currents plotted as blue vector arrows, and the next target waypoint with a green circle.\n\nMap extent (latitude and longitude limits), the location of the north arrow, and the location and scale of the scale bar are all set within the [mission configuration file](configuration.html#optional-plotting-settings), with example values below. `CONFIG.latLim` and `CONFIG.map.lonLim` are required to make the map; the north arrow and scale bar are optional and if those settings do not exist in `CONFIG` they will not be included in the plot. \n\nIn this example, bathymetry is plotted, specified by `CONFIG.map.bathyFile`. That last argument can be left out to not plot bathymetry (which can be slow depending on the resolution of the selected bathymetry raster). If the last argument is set to `1`, a prompt will appear to select the correct bathymetry file. \n\nHigh resolution bathymetry TIFF files can be downloaded from  [NCEI](https://www.ncei.noaa.gov/products/etopo-global-relief-model). See [Dependecies - Basemap rasters](index.html#basemap-rasters) for more info on how to select and download bathymetry rasters. \n\n```matlab\ntargetsFile = fullfile(CONFIG639.path.mission, 'targets');\n\n% map set up configurations - all should be specified in configuration file \nCONFIG.map.latLim = [19.0 22.75];\nCONFIG.map.lonLim = [-160.0 -154.25];\nCONFIG.map.naLat = 22.15;\nCONFIG.map.naLon = -154.5;\nCONFIG.map.scalePos = [-0.04 0.34];\nCONFIG.map.scaleMajor = [0:50:100];\nCONFIG.map.scaleMinor = [0:12.5:25];\n\n% plot with bathymetry - file specified \nplotGliderPath_etopo(CONFIG, pp, targetsFile, CONFIG.map.bathyFile);\n\n% plot with bathymetry - prompt for bathy file\nplotGliderPath_etopo(CONFIG, pp, targetsFile, 1);\n\n% plot without bathymetry\nplotGliderPath_etopo(CONFIG, pp, targetsFile);\n```\n\n![Example piloting map with planned track and waypoints in black, realized track in red with surface positions in yellow, and depth averaged currents as blue vector arrows. The current target waypoint is circled in green. ](images/examplePlots/sg639_map.png){#map fig-align='center' width=80%}\n\n<sub>[Back to top](#)</sub>\n\n\n## Mission summary plots\n\n### Final trackline map\n\n### Dive profile\n\n### Sound speed profile\n\n## Analysis plots\n\n### Cetacean event maps\n\n\n\n\n","srcMarkdownNoYaml":"\n\n```{r, include = FALSE}\nknitr::opts_chunk$set(\n  collapse = TRUE,\n  comment = \"#>\"\n)\nlibrary(fontawesome)\n```\n\nThis page provides example calls and outputs for each of the plotting functions contained within __*agate*__. There are plotting functions that may be useful during mission planning, active piloting, and in post-processing and analysis, and the plots are grouped by those categories below.\n\nBasic details for each plotting function are available within the standard MATLAB-type documentation in the header of each function and include a detailed description, info on input and output arguments, and examples. These details can be pulled up by typing `doc <function>` or `help <function>` within the MATLAB Command Window.\n\n## Initialization\n\nTo run any of the __*agate*__ plotting functions, the toolbox must be initialized with a configuration file. \n\nNo configuration file yet? Go back to [Get started - Create configuration files](get-started.html#create-configuration-files). At a minimum, the configuration file must include the top *required* portion, as well as the *optional - plotting* section.\n\n```matlab\n% ensure agate is on the path\n\n% initialize with specified configuration file, 'agate_config.cnf'\nCONFIG = agate(agate_config.cnf);\n\n% initialize with prompt to select configuration file\nCONFIG = agate;\n```\n\nMost of the plotting functions rely on a `pp` (piloting parameters) variable that is a large table with various outputs from the .nc and .log files compiled in one place. If this has already be created, it can be loaded directly. If not, use `extractPilotingParams` to build it. \n\n```matlab\n% load existing pp table\nload(fullfile(CONFIG.path.mission, 'flightStatus', ['diveTracking_' CONFIG.glider '.mat']))\n\n% create new pp table\npp = extractPilotingParams(CONFIG, fullfile(CONFIG.path.mission, 'basestationFiles'), fullfile(CONFIG.path.mission, 'flightStatus'), 0);\n% zero as last argument creates it from scratch (does not load any previous tables)\nsave(fullfile(CONFIG.path.mission, 'flightStatus', ['diveTracking_' CONFIG.glider '.mat']), 'pp');\n\n```\n\n<sub>[Back to top](#)</sub>\n\n## Piloting plots\n\nSome of the below piloting plots are also available within the Seaglider Piloting Tools, but __*agate*__ allows for more automated plotting (without the GUI) and tries to improve on some of those existing plots, either with better labels, more detail, or addition of acoustic inputs. \n\n### Humidity and pressure\n\n```matlab\nplotHumidityPressure(CONFIG, pp)\n```\n\n![Example humidity and pressure plot.](images/examplePlots/sg639_humidityPressure.png){#humid-press fig-align='center' width=50%}\n\n### Minimum voltage\n\nRev B gliders (*e.g.*, SG639 - left side) will have two lines - one each for the '24V' and '10V' batteries (even if both are 15V), while Rev E gliders (*e.g.*, SG679 - right side) will also have two lines, but the `10V` line will primarily remain at 15V and only the `24V` line will decrease over the mission. \n\n```matlab\nplotMinVolt(CONFIG, pp)\n```\n\n::: {#min-volt layout-ncol=2}\n![Minimum voltage plot for SG639 (Rev B glider).](images/examplePlots/sg639_minimumVoltage.png){#min-volt-639}\n\n![Minimum voltage plot for SG679 (Rev E glider).](images/examplePlots/sg679_minimumVoltage.png){#min-volt-679}\n:::\n\n### Battery remaining and PAM free space\n\nIf the glider is using a PMAR acoustic system, the free space remaining on each SD card will plot with the remaining battery capacity. \n\nThe 30% battery line and 35 GB PMAR line are hard coded into the plot, but could be modified within the function. The 'target mission duration' line is defined by `CONFIG.tmd`, as set in the configuration file. \n\n```matlab\nplotBattUseFreeSpace(CONFIG, pp)\n```\n\n![Remaining battery and PAM storage space for SG639 with PMARXL installed and operating.Note glider battery was not full at start of mission so remaining battery starts at just over 60%.](images/examplePlots/sg639_battUseFreeSpace.png){#batt-free-639 fig-align='center' width=50%}\n\n### Voltage use by device\nIf the glider is using a PMAR or WISPR acoustic system, power draw of the acoustic system will be included with measures of pitch, roll, and VBD (variable buoyancy device). \n\n```matlab\nplotVoltagePackUse(CONFIG, pp)\n```\n\n::: {#use layout-ncol=2}\n![Energy use by device, reported for each dive for SG639 (Rev B glider).](images/examplePlots/sg639_usageByDevice.png){#use-639}\n\n![Energy use by device, reported for each dive for SG679 (Rev E glider).](images/examplePlots/sg679_usageByDevice.png){#use-679}\n:::\n\n### Voltage use by device, normalized by dive duration\n\nIf the glider is using a PMAR or WISPR acoustic system, power draw of the acoustic system will be included with measures of pitch, roll, and VBD (variable buoyancy device).\n\n```matlab\nplotVoltagePackUse_norm(CONFIG, pp)\n```\n\n::: {#use-norm layout-ncol=2}\n\n![Energy use by device, normalized by dive duration for SG639 (Rev B glider).](images/examplePlots/sg639_usageByDevice_normalized.png){#use-norm-639}\n\n![Energy use by device, normalized by dive duration for SG679 (Rev E glider).](images/examplePlots/sg679_usageByDevice_normalized.png){#use-norm-679}\n\n:::\n\n### Map\n\nThe map will include the waypoints and track from the `targets` file and will plot the surface positions of each dive (yellow dots), with red lines connecting surface positions, currents plotted as blue vector arrows, and the next target waypoint with a green circle.\n\nMap extent (latitude and longitude limits), the location of the north arrow, and the location and scale of the scale bar are all set within the [mission configuration file](configuration.html#optional-plotting-settings), with example values below. `CONFIG.latLim` and `CONFIG.map.lonLim` are required to make the map; the north arrow and scale bar are optional and if those settings do not exist in `CONFIG` they will not be included in the plot. \n\nIn this example, bathymetry is plotted, specified by `CONFIG.map.bathyFile`. That last argument can be left out to not plot bathymetry (which can be slow depending on the resolution of the selected bathymetry raster). If the last argument is set to `1`, a prompt will appear to select the correct bathymetry file. \n\nHigh resolution bathymetry TIFF files can be downloaded from  [NCEI](https://www.ncei.noaa.gov/products/etopo-global-relief-model). See [Dependecies - Basemap rasters](index.html#basemap-rasters) for more info on how to select and download bathymetry rasters. \n\n```matlab\ntargetsFile = fullfile(CONFIG639.path.mission, 'targets');\n\n% map set up configurations - all should be specified in configuration file \nCONFIG.map.latLim = [19.0 22.75];\nCONFIG.map.lonLim = [-160.0 -154.25];\nCONFIG.map.naLat = 22.15;\nCONFIG.map.naLon = -154.5;\nCONFIG.map.scalePos = [-0.04 0.34];\nCONFIG.map.scaleMajor = [0:50:100];\nCONFIG.map.scaleMinor = [0:12.5:25];\n\n% plot with bathymetry - file specified \nplotGliderPath_etopo(CONFIG, pp, targetsFile, CONFIG.map.bathyFile);\n\n% plot with bathymetry - prompt for bathy file\nplotGliderPath_etopo(CONFIG, pp, targetsFile, 1);\n\n% plot without bathymetry\nplotGliderPath_etopo(CONFIG, pp, targetsFile);\n```\n\n![Example piloting map with planned track and waypoints in black, realized track in red with surface positions in yellow, and depth averaged currents as blue vector arrows. The current target waypoint is circled in green. ](images/examplePlots/sg639_map.png){#map fig-align='center' width=80%}\n\n<sub>[Back to top](#)</sub>\n\n\n## Mission summary plots\n\n### Final trackline map\n\n### Dive profile\n\n### Sound speed profile\n\n## Analysis plots\n\n### Cetacean event maps\n\n\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["quarto"],"toc":true,"toc-depth":4,"embed-resources":true,"output-file":"plotting-functions.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.57","theme":{"light":"theme.scss","dark":["cosmo","theme-dark.scss"]},"code-copy":true,"title":"Plots","subtitle":"Overview of all plotting functions"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}